<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Server.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">s0</a> &gt; <a href="index.source.html" class="el_package">edu.brown.cs.student.main.server</a> &gt; <span class="el_source">Server.java</span></div><h1>Server.java</h1><pre class="source lang-java linenums">package edu.brown.cs.student.main.server;

import static spark.Spark.after;

import java.util.List;
import spark.Spark;

/**
 * Top-level class for this demo. Contains the main() method which starts Spark and runs the various
 * handlers.
 *
 * &lt;p&gt;We have two endpoints in this demo. They need to share state (a menu). This is a great chance
 * to use dependency injection, as we do here with the menu set. If we needed more endpoints, more
 * functionality classes, etc. we could make sure they all had the same shared state.
 */
public class Server {
  private static List&lt;List&lt;String&gt;&gt; data;
<span class="nc" id="L18"></span>
  public static void main(String[] args) {

    int port = 3232;
<span class="nc" id="L22">    Spark.port(port);</span>
<span class="nc" id="L23">    /*</span>
       Setting CORS headers to allow cross-origin requests from the client; this is necessary for the client to
       be able to make requests to the server.

       By setting the Access-Control-Allow-Origin header to &quot;*&quot;, we allow requests from any origin.
       This is not a good idea in real-world applications, since it opens up your server to cross-origin requests
       from any website. Instead, you should set this header to the origin of your client, or a list of origins
       that you trust.

       By setting the Access-Control-Allow-Methods header to &quot;*&quot;, we allow requests with any HTTP method.
       Again, it's generally better to be more specific here and only allow the methods you need, but for
       this demo we'll allow all methods.

       We recommend you learn more about CORS with these resources:
           - https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS
           - https://portswigger.net/web-security/cors
    */
    after(
<span class="nc" id="L41">        (request, response) -&gt; {</span>
          response.header(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;);
<span class="nc" id="L43">          response.header(&quot;Access-Control-Allow-Methods&quot;, &quot;*&quot;);</span>
<span class="nc" id="L44">        });</span>
<span class="nc" id="L45"></span>
    /**
     * loadcsv, which loads a CSV file if one is located at the specified path. viewcsv, which sends
     * back the entire CSV file's contents as a Json 2-dimensional array. searchcsv, which sends
     * back rows matching the given search criteria. broadband, which sends back the broadband data
     * from the ACS described above.
     */
    // Setting up the handler for the GET /order and /mock endpoints
    Spark.get(&quot;loadcsv&quot;, new LoadCSVHandler());
<span class="nc" id="L54">    Spark.get(&quot;viewcsv&quot;, new ViewCSVHandler());</span>
<span class="nc" id="L55">    Spark.get(&quot;searchcsv&quot;, new SearchCSVHandler());</span>
<span class="nc" id="L56">    Spark.init();</span>
<span class="nc" id="L57">    Spark.awaitInitialization();</span>
<span class="nc" id="L58"></span>
    // Notice this link alone leads to a 404... Why is that?
    System.out.println(&quot;Server started at http://localhost:&quot; + port);
<span class="nc" id="L61">  }</span>
<span class="nc" id="L62"></span>
  public static List&lt;List&lt;String&gt;&gt; getData() {
<span class="nc" id="L64">    return data;</span>
  }

  public static void setData(List&lt;List&lt;String&gt;&gt; setData) {
<span class="nc" id="L68">    data = setData;</span>
<span class="nc" id="L69">  }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>